===============================================
       NK-YRItems åŠ¨æ€Loreç³»ç»Ÿä½¿ç”¨è¯´æ˜
===============================================

ã€åŠŸèƒ½ç®€ä»‹ã€‘
-----------
å®ç°äº†JavaæœåŠ¡ç«¯å¸¸è§çš„"åŠ¨æ€Lore"åŠŸèƒ½ï¼š
âœ“ ç‰©å“çš„loreä¸å†å›ºå®šï¼Œè€Œæ˜¯æ ¹æ®NBTå®æ—¶ç”Ÿæˆ
âœ“ NBTæ•°æ®å˜åŒ–æ—¶ï¼Œloreè‡ªåŠ¨æ›´æ–°
âœ“ é€šè¿‡JavaScriptè„šæœ¬è‡ªå®šä¹‰loreæ˜¾ç¤ºè§„åˆ™
âœ“ æ”¯æŒå¤æ‚çš„å±æ€§å±•ç¤ºï¼ˆèŒƒå›´ä¼¤å®³ã€å“è´¨ã€é™„é­”ç­‰ï¼‰

ã€å¿«é€Ÿå¼€å§‹ã€‘
-----------

1. ç¼–è¯‘æ’ä»¶
   åœ¨é¡¹ç›®ç›®å½•è¿è¡Œï¼šgradlew.bat shadowJar
   ç”Ÿæˆçš„JARåœ¨ï¼šE:\ServerPLUGINS\ç½‘æ˜“NKæœåŠ¡å™¨æ’ä»¶\YRItems.jar

2. æ”¾å…¥æœåŠ¡å™¨
   å°†YRItems.jarå¤åˆ¶åˆ°æœåŠ¡å™¨çš„pluginsæ–‡ä»¶å¤¹

3. åˆ›å»ºç‰©å“é…ç½®
   åœ¨ plugins/YRItems/items/ ä¸‹åˆ›å»ºymlæ–‡ä»¶ï¼š

   ä¼ å¥‡ä¹‹å‰‘:
     identifier: minecraft:diamond_sword
     name: "Â§6Â§lä¼ å¥‡ä¹‹å‰‘"
     # ä¸å†™loreï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆ
     nbt:
       YRAttributes:
         Damage: "10-30"
         CritRate: 25

4. è‡ªå®šä¹‰Loreæ˜¾ç¤º
   ç¼–è¾‘ plugins/YRItems/Scripts/LoreRenderer.js

   function renderLore(itemId, itemDamage, itemName, nbtDataJSON) {
       var nbtData = JSON.parse(nbtDataJSON);
       if (!nbtData.YRAttributes) return null;

       var attr = nbtData.YRAttributes;
       var lore = [];

       // è‡ªå®šä¹‰è§„åˆ™ï¼šå‰é¢åŠ é¢œè‰²å’Œæ–‡å­—
       if (attr.Damage) {
           lore.push("Â§cæ”»å‡»åŠ›: Â§f" + attr.Damage);
       }
       if (attr.CritRate) {
           lore.push("Â§eæš´å‡»ç‡: Â§f" + attr.CritRate + "%");
       }

       return lore;
   }

5. æµ‹è¯•
   æ¸¸æˆå†…æ‰§è¡Œï¼š/yritems get ä¼ å¥‡ä¹‹å‰‘
   æŸ¥çœ‹ç‰©å“ï¼Œloreä¼šæ˜¾ç¤ºï¼š
   Â§ cæ”»å‡»åŠ›: Â§f10-30
   Â§eæš´å‡»ç‡: Â§f25%

ã€æ ¸å¿ƒåŸç†ã€‘
-----------
æ‹¦æˆªInventoryContentPacketå’ŒInventorySlotPacket
â†’ æ£€æŸ¥ç‰©å“NBTæ˜¯å¦æœ‰YRAttributes
â†’ è°ƒç”¨JavaScriptè„šæœ¬ç”Ÿæˆlore
â†’ ä¿®æ”¹æ•°æ®åŒ…ä¸­çš„lore
â†’ å‘é€ç»™å®¢æˆ·ç«¯

è¿™æ ·ç‰©å“æœ¬èº«å¯èƒ½å®Œå…¨ä¸è®¾ç½®loreï¼Œ
åªæ˜¯å‘åŒ…æ—¶ç»™äº†å®¢æˆ·ç«¯loreå†…å®¹ã€‚

ã€ç¤ºä¾‹ï¼šä½ çš„éœ€æ±‚ã€‘
---------------

ç‰©å“NBTï¼š
YRAttributes:
  Damage: "10-30"

è„šæœ¬å¤„ç†ï¼š
if (attr.Damage) {
    lore.push("Â§cæ”»å‡»åŠ›: Â§f" + attr.Damage);
}

å®¢æˆ·ç«¯çœ‹åˆ°çš„loreï¼š
Â§cæ”»å‡»åŠ›: Â§f10-30

å¦‚æœNBTå˜æˆ Damage: "9-28"
ä¸‹æ¬¡çœ‹loreå°±ä¼šå˜æˆï¼š
Â§cæ”»å‡»åŠ›: Â§f9-28

ã€é…ç½®æ–‡ä»¶ã€‘
-----------

lore_config.ymlï¼š
  enabled: true                    # å¯ç”¨åŠ¨æ€lore
  lore_script_path: "LoreRenderer.js::renderLore"  # è„šæœ¬è·¯å¾„
  debug: false                     # è°ƒè¯•æ¨¡å¼
  filters:
    item_ids: []                   # ä»…å¯¹è¿™äº›IDç”Ÿæ•ˆï¼ˆç©º=å…¨éƒ¨ï¼‰
    excluded_item_ids: []          # æ’é™¤è¿™äº›ID
    required_nbt_keys:             # å¿…é¡»æœ‰è¿™äº›NBTé”®
      - "YRAttributes"

ã€é«˜çº§ç”¨æ³•ã€‘
-----------

1. åµŒå¥—å¯¹è±¡ï¼š
   YRAttributes:
     ExtraStats:
       "ç«ç„°æŠ—æ€§": "50%"
       "å‡»é€€æŠ—æ€§": "80%"

   è„šæœ¬ï¼š
   if (attr.ExtraStats) {
       for (var key in attr.ExtraStats) {
           lore.push("Â§b" + key + ": Â§f" + attr.ExtraStats[key]);
       }
   }

2. æ•°ç»„ï¼š
   YRAttributes:
     Enchantments:
       - name: "é”‹åˆ©"
         level: 5

   è„šæœ¬ï¼š
   if (attr.Enchantments) {
       for (var i = 0; i < attr.Enchantments.length; i++) {
           var e = attr.Enchantments[i];
           lore.push("Â§d" + e.name + " " + e.level);
       }
   }

3. ç»“åˆèŠ‚ç‚¹ç³»ç»Ÿï¼ˆéšæœºå±æ€§ï¼‰ï¼š
   sections:
     min-dmg:
       type: number
       min: 10
       max: 30
     max-dmg:
       type: number
       min: 40
       max: 80
     dmg-str:
       type: calculation
       expression: "'<min-dmg>-<max-dmg>'"
   nbt:
     YRAttributes:
       Damage: "<dmg-str>"

   æ¯æ¬¡è·å–ç‰©å“ï¼ŒDamageéƒ½ä¸åŒï¼Œloreä¹Ÿè·Ÿç€å˜ï¼

ã€æ–‡ä»¶ä½ç½®ã€‘
-----------

æºç ï¼š
  e:\ServerPLUGINS\NK-YRItems\

ç¼–è¯‘è¾“å‡ºï¼š
  E:\ServerPLUGINS\ç½‘æ˜“NKæœåŠ¡å™¨æ’ä»¶\YRItems.jar

æœåŠ¡å™¨è¿è¡Œæ—¶æ–‡ä»¶ï¼š
  plugins/YRItems/items/            # ç‰©å“é…ç½®
  plugins/YRItems/Scripts/          # JSè„šæœ¬
  plugins/YRItems/lore_config.yml   # Loreé…ç½®

ã€è¯¦ç»†æ–‡æ¡£ã€‘
-----------

å¿«é€Ÿå…¥é—¨ï¼šQUICK_START.md
å®Œæ•´æ–‡æ¡£ï¼šDYNAMIC_LORE_README.md
ç¤ºä¾‹é…ç½®ï¼šsrc/main/resources/items/dynamic_lore_example.yml

ã€å¸¸è§é—®é¢˜ã€‘
-----------

Q: Loreæ²¡æ˜¾ç¤ºï¼Ÿ
A: æ£€æŸ¥ç‰©å“NBTæ˜¯å¦æœ‰YRAttributesï¼Œæ£€æŸ¥è„šæœ¬æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯

Q: å¦‚ä½•è°ƒè¯•ï¼Ÿ
A: è®¾ç½®debug: trueï¼Œåœ¨è„šæœ¬ä¸­ç”¨print()è¾“å‡ºæ—¥å¿—

Q: æ€§èƒ½å½±å“ï¼Ÿ
A: å¾ˆå°ï¼Œå¯ä»¥é€šè¿‡item_idsè¿‡æ»¤å‡å°‘å¤„ç†é‡

Q: æ”¯æŒä»€ä¹ˆé¢œè‰²ï¼Ÿ
A: Minecraftæ ‡å‡†é¢œè‰²ä»£ç  Â§0-Â§9 Â§a-Â§f Â§l Â§m Â§nç­‰

ã€ç¼–è¯‘ç¯å¢ƒã€‘
-----------

JDK: jdk-18.0.2.1
Gradle: 8.1.1
Rhino: 1.7.14

ã€æŠ€æœ¯æ”¯æŒã€‘
-----------

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£æˆ–å¯ç”¨debugæ¨¡å¼æŸ¥çœ‹æ—¥å¿—ã€‚

ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼ğŸ‰

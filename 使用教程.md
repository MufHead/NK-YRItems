# YRItems ä½¿ç”¨æ•™ç¨‹

> **å®Œæ•´çš„ç‰©å“åº“æ’ä»¶ä½¿ç”¨æŒ‡å—**

---

## ğŸ“‘ ç›®å½•

1. [æ’ä»¶ç®€ä»‹](#æ’ä»¶ç®€ä»‹)
2. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
3. [ç‰©å“é…ç½®æ•™ç¨‹](#ç‰©å“é…ç½®æ•™ç¨‹)
4. [åŠ¨æ€Loreç³»ç»Ÿ](#åŠ¨æ€loreç³»ç»Ÿ)
5. [è„šæœ¬ç³»ç»Ÿæ•™ç¨‹](#è„šæœ¬ç³»ç»Ÿæ•™ç¨‹)
6. [èŠ‚ç‚¹ç³»ç»Ÿæ•™ç¨‹](#èŠ‚ç‚¹ç³»ç»Ÿæ•™ç¨‹)
7. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## æ’ä»¶ç®€ä»‹

### YRItems æ˜¯ä»€ä¹ˆï¼Ÿ

YRItems æ˜¯ä¸€ä¸ª**ç‰©å“åº“æ’ä»¶**ï¼Œå®ƒæä¾›ï¼š
- âœ… ç‰©å“é…ç½®å’ŒNBTæ•°æ®ç®¡ç†
- âœ… åŠ¨æ€Loreæ˜¾ç¤ºç³»ç»Ÿ
- âœ… JavaScriptè„šæœ¬å¼•æ“
- âœ… å¼ºå¤§çš„èŠ‚ç‚¹ç³»ç»Ÿ

### YRItems ä¸æ˜¯ä»€ä¹ˆï¼Ÿ

YRItems **ä¸æä¾›**ï¼š
- âŒ RPGæˆ˜æ–—ç³»ç»Ÿï¼ˆä¼¤å®³è®¡ç®—ã€å±æ€§åŠ æˆç­‰ï¼‰
- âŒ æŠ€èƒ½ç³»ç»Ÿ
- âŒ æ¸¸æˆç©æ³•é€»è¾‘

è¿™äº›åŠŸèƒ½éœ€è¦é…åˆå…¶ä»–æ’ä»¶ï¼ˆå¦‚YRAttributeï¼‰æˆ–é€šè¿‡è„šæœ¬è‡ªè¡Œå®ç°ã€‚

---

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…æ’ä»¶

1. ä¸‹è½½ `YRItems.jar`
2. æ”¾å…¥æœåŠ¡å™¨ `plugins/` ç›®å½•
3. é‡å¯æœåŠ¡å™¨

æ’ä»¶ä¼šè‡ªåŠ¨ç”Ÿæˆä»¥ä¸‹ç›®å½•ç»“æ„ï¼š

```
YRItems/
  â”œâ”€â”€ config.yml              # ä¸»é…ç½®
  â”œâ”€â”€ items/                  # ç‰©å“é…ç½®ç›®å½•
  â”‚   â””â”€â”€ example_items.yml
  â”œâ”€â”€ configs/                # è‡ªå®šä¹‰é…ç½®ç›®å½•
  â”‚   â””â”€â”€ display_rules.yml  # åŠ¨æ€Loreè§„åˆ™
  â””â”€â”€ Scripts/                # è„šæœ¬ç›®å½•
      â”œâ”€â”€ DynamicLore.js     # åŠ¨æ€Loreè„šæœ¬
      â””â”€â”€ ExampleScript.js   # ç¤ºä¾‹è„šæœ¬
```

### 2. åŸºæœ¬å‘½ä»¤

```bash
# ç»™äºˆç‰©å“
/yritems give <ç©å®¶> <ç‰©å“ID> [æ•°é‡]

# é‡è½½æ’ä»¶ï¼ˆé‡è½½é…ç½®+è„šæœ¬ï¼‰
/yritems reload

# åˆ—å‡ºæ‰€æœ‰ç‰©å“
/yritems list
```

### 3. ç¬¬ä¸€ä¸ªç‰©å“

ç¼–è¾‘ `YRItems/items/example_items.yml`ï¼š

```yaml
my_first_sword:
  identifier: "minecraft:diamond_sword"
  name: "Â§6æˆ‘çš„ç¬¬ä¸€æŠŠå‰‘"
  lore:
    - "Â§7è¿™æ˜¯ä¸€æŠŠæ™®é€šçš„å‰‘"
```

é‡è½½æ’ä»¶ï¼š
```bash
/yritems reload
```

ç»™è‡ªå·±ç‰©å“ï¼š
```bash
/yritems give YourName my_first_sword 1
```

---

## ç‰©å“é…ç½®æ•™ç¨‹

### åŸºæœ¬é…ç½®ç»“æ„

```yaml
ç‰©å“ID:                              # å”¯ä¸€æ ‡è¯†ç¬¦
  identifier: "minecraft:ç‰©å“ç±»å‹"   # åŸç‰ˆç‰©å“ID
  name: "Â§6æ˜¾ç¤ºåç§°"                  # ç‰©å“åç§°ï¼ˆæ”¯æŒé¢œè‰²ä»£ç ï¼‰
  lore: []                          # ç‰©å“æè¿°ï¼ˆå¯ç•™ç©ºï¼‰
  count: 1                          # æ•°é‡ï¼ˆå¯é€‰ï¼‰
  damage: 0                         # ç‰©å“æŸä¼¤å€¼ï¼ˆå¯é€‰ï¼‰
  enchantments: []                  # é™„é­”åˆ—è¡¨ï¼ˆå¯é€‰ï¼‰
  nbt: {}                           # è‡ªå®šä¹‰NBTæ•°æ®ï¼ˆå¯é€‰ï¼‰
```

### ç¤ºä¾‹1ï¼šç®€å•ç‰©å“

```yaml
basic_sword:
  identifier: "minecraft:iron_sword"
  name: "Â§7é“å‰‘"
  lore:
    - "Â§7ä¸€æŠŠæ™®é€šçš„é“å‰‘"
```

### ç¤ºä¾‹2ï¼šå¸¦é™„é­”çš„ç‰©å“

```yaml
enchanted_bow:
  identifier: "minecraft:bow"
  name: "Â§bç²¾å‡†ä¹‹å¼“"
  lore:
    - "Â§7æ°¸ä¸åç¦»ç›®æ ‡"
  enchantments:
    - id: 19    # åŠ›é‡
      level: 5
    - id: 21    # æ— é™
      level: 1
```

é™„é­”IDå‚è€ƒï¼š[Minecrafté™„é­”IDåˆ—è¡¨](https://minecraft.fandom.com/wiki/Enchanting)

### ç¤ºä¾‹3ï¼šè‡ªå®šä¹‰NBTæ•°æ®

```yaml
magic_staff:
  identifier: "minecraft:stick"
  name: "Â§5é­”æ³•æ³•æ–"
  lore: []  # ç•™ç©ºï¼Œä½¿ç”¨åŠ¨æ€Lore

  # è‡ªå®šä¹‰NBTæ•°æ®
  nbt:
    YRAttributes:
      # åŸºç¡€å±æ€§
      Quality: "å²è¯—"
      Level: 50

      # æˆ˜æ–—å±æ€§
      MagicPower: 500
      ManaRegen: 10
      CritRate: 25

      # ç‰¹æ®Šæ ‡è®°
      ItemType: "Staff"
```

**é‡è¦æç¤º**ï¼š
- NBTæ•°æ®å­˜å‚¨åœ¨ç‰©å“ä¸­ï¼Œä½†**ä¸ä¼šè‡ªåŠ¨ç”Ÿæ•ˆ**
- éœ€è¦é…åˆå…¶ä»–æ’ä»¶æˆ–è„šæœ¬æ¥è¯»å–å’Œåº”ç”¨è¿™äº›å±æ€§
- åŠ¨æ€Loreç³»ç»Ÿå¯ä»¥è‡ªåŠ¨æ˜¾ç¤ºè¿™äº›å±æ€§

---

## åŠ¨æ€Loreç³»ç»Ÿ

### ä»€ä¹ˆæ˜¯åŠ¨æ€Loreï¼Ÿ

åŠ¨æ€Loreå¯ä»¥æ ¹æ®ç‰©å“çš„NBTæ•°æ®**å®æ—¶ç”Ÿæˆ**ç‰©å“è¯´æ˜ï¼Œä¸”åªåœ¨å®¢æˆ·ç«¯æ˜¾ç¤ºï¼Œä¸ä¿®æ”¹ç‰©å“å®é™…NBTã€‚

### å·¥ä½œæµç¨‹

1. ç‰©å“ä¸­è®¾ç½® `YRAttributes` NBTæ•°æ®
2. é…ç½® `configs/display_rules.yml` å®šä¹‰æ˜¾ç¤ºè§„åˆ™
3. ç©å®¶æŸ¥çœ‹ç‰©å“æ—¶ï¼Œè‡ªåŠ¨æ ¹æ®è§„åˆ™ç”ŸæˆLore
4. æ”¯æŒçƒ­é‡è½½é…ç½®

### é…ç½®æ˜¾ç¤ºè§„åˆ™

**æ–‡ä»¶ä½ç½®**ï¼š`YRItems/configs/display_rules.yml`

#### è§„åˆ™ç±»å‹1ï¼šå€¼æ˜ å°„ï¼ˆå›ºå®šé€‰é¡¹ï¼‰

é€‚åˆï¼šå“è´¨ã€ç±»å‹ã€ç­‰çº§ç­‰æœ‰å›ºå®šé€‰é¡¹çš„å±æ€§

```yaml
quality:
  nbt_key: "Quality"  # è¯»å–çš„NBTé”®å

  value_mappings:     # å€¼æ˜ å°„è¡¨
    "æ™®é€š":
      display: "Â§få“è´¨: æ™®é€š"
    "ç¨€æœ‰":
      display: "Â§9å“è´¨: ç¨€æœ‰"
    "å²è¯—":
      display: "Â§5å“è´¨: å²è¯—"
    "ä¼ è¯´":
      display: "Â§6å“è´¨: ä¼ è¯´"
```

#### è§„åˆ™ç±»å‹2ï¼šæ ¼å¼åŒ–æ˜¾ç¤º

é€‚åˆï¼šæ•°å€¼ç±»å±æ€§ï¼ˆæ”»å‡»åŠ›ã€æš´å‡»ç‡ç­‰ï¼‰

```yaml
damage:
  nbt_key: "Damage"
  display_format: "Â§câš” æ”»å‡»åŠ›: Â§f{value}"

crit_rate:
  nbt_key: "CritRate"
  display_format: "Â§eâ˜† æš´å‡»ç‡: Â§f{value}%"
```

**å ä½ç¬¦**ï¼š
- `{value}` - NBTåŸå§‹å€¼
- `{value_plus_1}` - NBTå€¼+1ï¼ˆç”¨äºç­‰çº§æ˜¾ç¤ºï¼‰

#### è§„åˆ™ç±»å‹3ï¼šèŒƒå›´æ˜ å°„ï¼ˆåŠ¨æ€é¢œè‰²ï¼‰

é€‚åˆï¼šè€ä¹…åº¦ã€è¡€é‡ç­‰éœ€è¦æ ¹æ®æ•°å€¼æ˜¾ç¤ºä¸åŒé¢œè‰²çš„å±æ€§

```yaml
durability:
  nbt_key: "Durability"
  display_format: "è€ä¹…: {value}/1000"

  value_ranges:
    - min: 0
      max: 300
      color: "Â§c"  # çº¢è‰²ï¼ˆä½è€ä¹…ï¼‰
    - min: 301
      max: 700
      color: "Â§e"  # é»„è‰²ï¼ˆä¸­ç­‰ï¼‰
    - min: 701
      max: 1000
      color: "Â§a"  # ç»¿è‰²ï¼ˆé«˜è€ä¹…ï¼‰
```

### å®Œæ•´ç¤ºä¾‹

**ç‰©å“é…ç½®**ï¼ˆ`items/rpg_items.yml`ï¼‰ï¼š

```yaml
legendary_sword:
  identifier: "minecraft:diamond_sword"
  name: "Â§6ä¼ è¯´ä¹‹åˆƒ"
  lore: []  # ç•™ç©º

  nbt:
    YRAttributes:
      level: 2
      Quality: "ä¼ è¯´"
      Damage: 150
      CritRate: 35
      Durability: 850
```

**æ˜¾ç¤ºè§„åˆ™**ï¼ˆ`configs/display_rules.yml`ï¼‰ï¼š

```yaml
# å¼ºåŒ–ç­‰çº§
enhance_level:
  nbt_key: "level"
  value_mappings:
    '0':
      level_text: "Â§få¼ºåŒ–ç­‰çº§ Â§71Â§f"
      description: "Â§7åˆçº§å¼ºåŒ–"
    '1':
      level_text: "Â§få¼ºåŒ–ç­‰çº§ Â§e2Â§f"
      description: "Â§eä¸­çº§å¼ºåŒ–"
    '2':
      level_text: "Â§få¼ºåŒ–ç­‰çº§ Â§63Â§f"
      description: "Â§6é«˜çº§å¼ºåŒ–"

# å“è´¨
quality:
  nbt_key: "Quality"
  value_mappings:
    "ä¼ è¯´":
      display: "Â§6å“è´¨: ä¼ è¯´"

# æ”»å‡»åŠ›
damage:
  nbt_key: "Damage"
  display_format: "Â§câš” æ”»å‡»åŠ›: Â§f{value}"

# æš´å‡»ç‡
crit_rate:
  nbt_key: "CritRate"
  display_format: "Â§eâ˜† æš´å‡»ç‡: Â§f{value}%"

# è€ä¹…åº¦
durability:
  nbt_key: "Durability"
  display_format: "è€ä¹…: {value}/1000"
  value_ranges:
    - min: 701
      max: 1000
      color: "Â§a"
```

**æ¸¸æˆå†…æ˜¾ç¤ºæ•ˆæœ**ï¼š

```
Â§8Â§m--------------------
Â§få¼ºåŒ–ç­‰çº§ Â§63Â§f
Â§6é«˜çº§å¼ºåŒ–
Â§6å“è´¨: ä¼ è¯´
Â§câš” æ”»å‡»åŠ›: Â§f150
Â§eâ˜† æš´å‡»ç‡: Â§f35%
Â§aè€ä¹…: 850/1000
Â§8Â§m--------------------
```

### ä¿®æ”¹æ˜¾ç¤ºè§„åˆ™

1. ç¼–è¾‘ `configs/display_rules.yml`
2. è¿è¡Œ `/yritems reload`
3. æŸ¥çœ‹ç‰©å“ï¼Œæ–°çš„Loreç«‹å³ç”Ÿæ•ˆ

**æ— éœ€é‡å¯æœåŠ¡å™¨ï¼**

---

## è„šæœ¬ç³»ç»Ÿæ•™ç¨‹

### è„šæœ¬ç³»ç»Ÿç®€ä»‹

YRItems ä½¿ç”¨ **Rhino JavaScript å¼•æ“**ï¼Œæ”¯æŒï¼š
- âœ… å®Œæ•´çš„JavaScriptè¯­æ³•
- âœ… äº‹ä»¶ç›‘å¬ï¼ˆ`@Event`æ³¨è§£ï¼‰
- âœ… è®¿é—®Nukkit API
- âœ… çƒ­é‡è½½

### åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªè„šæœ¬

#### 1. åˆ›å»ºè„šæœ¬æ–‡ä»¶

åœ¨ `YRItems/Scripts/` ç›®å½•åˆ›å»º `MyFirstScript.js`ï¼š

```javascript
/**
 * æˆ‘çš„ç¬¬ä¸€ä¸ªè„šæœ¬
 */

// è„šæœ¬åˆå§‹åŒ–æ—¶æ‰§è¡Œ
print("MyFirstScript å·²åŠ è½½ï¼");

// å®šä¹‰ä¸€ä¸ªå‡½æ•°
function greetPlayer(playerName) {
    print("æ¬¢è¿ç©å®¶: " + playerName);
}
```

#### 2. é‡è½½è„šæœ¬

```bash
/yritems reload
```

æ§åˆ¶å°ä¼šè¾“å‡ºï¼š
```
[YRItemsè„šæœ¬] MyFirstScript å·²åŠ è½½ï¼
```

### äº‹ä»¶ç›‘å¬

ä½¿ç”¨ `@Event` æ³¨è§£ç›‘å¬æ¸¸æˆäº‹ä»¶ã€‚

#### ç¤ºä¾‹1ï¼šç›‘å¬ç©å®¶äº¤äº’

```javascript
/**
 * ç›‘å¬ç©å®¶å³é”®ç‚¹å‡»äº‹ä»¶
 */
// @Event(eventName = "cn.nukkit.event.player.PlayerInteractEvent", priority="NORMAL")
function onPlayerInteract(event) {
    var player = event.getPlayer();
    var item = event.getItem();

    // æ£€æŸ¥æ˜¯å¦æ˜¯ç‰¹å®šç‰©å“
    var nbt = item.getNamedTag();
    if (nbt.exist("YRAttributes")) {
        var attr = nbt.getCompound("YRAttributes");

        // è¯»å–è‡ªå®šä¹‰å±æ€§
        if (attr.exist("ItemType")) {
            var itemType = attr.getString("ItemType");
            player.sendMessage("Â§aä½ ä½¿ç”¨äº†: " + itemType);
        }
    }
}
```

#### ç¤ºä¾‹2ï¼šç›‘å¬ç©å®¶æ”»å‡»

```javascript
/**
 * ç›‘å¬ç©å®¶æ”»å‡»å®ä½“äº‹ä»¶
 */
// @Event(eventName = "cn.nukkit.event.entity.EntityDamageByEntityEvent", priority="NORMAL")
function onEntityDamageByEntity(event) {
    var damager = event.getDamager();
    var entity = event.getEntity();

    // æ£€æŸ¥æ˜¯å¦æ˜¯ç©å®¶æ”»å‡»
    if (damager instanceof Packages.cn.nukkit.Player) {
        var player = damager;
        var weapon = player.getInventory().getItemInHand();
        var nbt = weapon.getNamedTag();

        // æ£€æŸ¥æ­¦å™¨æ˜¯å¦æœ‰è‡ªå®šä¹‰å±æ€§
        if (nbt.exist("YRAttributes")) {
            var attr = nbt.getCompound("YRAttributes");

            // è¯»å–æ”»å‡»åŠ›
            if (attr.exist("Damage")) {
                var damage = attr.getInt("Damage");

                // ä¿®æ”¹ä¼¤å®³
                event.setDamage(damage);
                player.sendMessage("Â§cé€ æˆä¼¤å®³: " + damage);
            }
        }
    }
}
```

### å…¨å±€å¯¹è±¡

è„šæœ¬ä¸­å¯ä»¥è®¿é—®ä»¥ä¸‹å…¨å±€å¯¹è±¡ï¼š

```javascript
// YRItemsæ’ä»¶å®ä¾‹
plugin.getLogger().info("æ—¥å¿—æ¶ˆæ¯");
plugin.getItemConfig();
plugin.getCustomConfigManager();

// NukkitæœåŠ¡å™¨å®ä¾‹
Server.getInstance().getOnlinePlayers();
Server.getInstance().broadcastMessage("å…¨æœæ¶ˆæ¯");

// è¾“å‡ºæ—¥å¿—
print("è¿™ä¼šæ˜¾ç¤ºåœ¨æ§åˆ¶å°");

// è®¿é—®Javaç±»
var Item = Packages.cn.nukkit.item.Item;
var Player = Packages.cn.nukkit.Player;
```

### è¯»å–é…ç½®æ–‡ä»¶

```javascript
// è·å–è‡ªå®šä¹‰é…ç½®ç®¡ç†å™¨
var configManager = plugin.getCustomConfigManager();

// è¯»å–é…ç½®æ–‡ä»¶
var myConfig = configManager.getConfig("my_config.yml");

// è·å–é…ç½®å€¼
var value = myConfig.get("some_key");
var number = myConfig.getInt("number_key");
var text = myConfig.getString("text_key");
```

### å¸¸ç”¨äº‹ä»¶åˆ—è¡¨

| äº‹ä»¶ç±»å | è¯´æ˜ |
|---------|------|
| `PlayerInteractEvent` | ç©å®¶äº¤äº’ï¼ˆå³é”®ç‚¹å‡»ï¼‰ |
| `PlayerItemHeldEvent` | ç©å®¶åˆ‡æ¢æ‰‹æŒç‰©å“ |
| `EntityDamageByEntityEvent` | å®ä½“æ”»å‡»å®ä½“ |
| `PlayerDropItemEvent` | ç©å®¶ä¸¢å¼ƒç‰©å“ |
| `InventoryClickEvent` | ç©å®¶ç‚¹å‡»èƒŒåŒ… |
| `PlayerDeathEvent` | ç©å®¶æ­»äº¡ |
| `PlayerJoinEvent` | ç©å®¶åŠ å…¥ |

å®Œæ•´äº‹ä»¶åˆ—è¡¨ï¼š[Nukkit Event API](https://github.com/NukkitX/Nukkit/tree/master/src/main/java/cn/nukkit/event)

### è„šæœ¬è°ƒè¯•

å¯ç”¨è°ƒè¯•æ¨¡å¼ï¼ˆ`Scripts/DynamicLore.js` ç¤ºä¾‹ï¼‰ï¼š

```javascript
var DEBUG_MODE = true;  // å¯ç”¨è°ƒè¯•

function myFunction() {
    if (DEBUG_MODE) {
        print("[è°ƒè¯•] å‡½æ•°è¢«è°ƒç”¨");
    }
    // ä½ çš„ä»£ç 
}
```

---

## èŠ‚ç‚¹ç³»ç»Ÿæ•™ç¨‹

### èŠ‚ç‚¹ç³»ç»Ÿç®€ä»‹

èŠ‚ç‚¹ç³»ç»Ÿæ˜¯ä¸€ä¸ª**æ¡ä»¶-åŠ¨ä½œ**æ¡†æ¶ï¼Œå¯ä»¥åœ¨ç‰©å“é…ç½®ä¸­å®šä¹‰å¤æ‚çš„é€»è¾‘æµç¨‹ã€‚

### èŠ‚ç‚¹ç±»å‹

#### æ¡ä»¶èŠ‚ç‚¹ï¼ˆCondition Nodesï¼‰

æ£€æŸ¥æ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼š

| èŠ‚ç‚¹ç±»å‹ | è¯´æ˜ | é…ç½®ç¤ºä¾‹ |
|---------|------|---------|
| `HasPermission` | æ£€æŸ¥ç©å®¶æƒé™ | `permission: "yritems.use"` |
| `PlayerLevel` | æ£€æŸ¥ç©å®¶ç­‰çº§ | `operator: ">=", value: 30` |
| `HasItem` | æ£€æŸ¥èƒŒåŒ…ç‰©å“ | `item: "diamond", amount: 10` |
| `ScriptCondition` | è„šæœ¬æ¡ä»¶ | `script: "MyScript.js::check"` |

#### åŠ¨ä½œèŠ‚ç‚¹ï¼ˆAction Nodesï¼‰

æ‰§è¡Œå…·ä½“æ“ä½œï¼š

| èŠ‚ç‚¹ç±»å‹ | è¯´æ˜ | é…ç½®ç¤ºä¾‹ |
|---------|------|---------|
| `GiveItem` | ç»™äºˆç‰©å“ | `item: "sword", amount: 1` |
| `Message` | å‘é€æ¶ˆæ¯ | `text: "Â§aæ­å–œï¼"` |
| `Command` | æ‰§è¡Œå‘½ä»¤ | `command: "/give {player} diamond"` |
| `ScriptAction` | è„šæœ¬åŠ¨ä½œ | `script: "MyScript.js::action"` |

### åŸºç¡€ç¤ºä¾‹

```yaml
magic_box:
  identifier: "minecraft:chest"
  name: "Â§dé­”æ³•å®ç®±"

  # å³é”®ä½¿ç”¨æ—¶æ‰§è¡Œ
  on_use:
    type: "sequence"  # é¡ºåºæ‰§è¡ŒèŠ‚ç‚¹
    nodes:
      # èŠ‚ç‚¹1ï¼šå‘é€æ¶ˆæ¯
      - type: "Message"
        text: "Â§aä½ æ‰“å¼€äº†é­”æ³•å®ç®±ï¼"

      # èŠ‚ç‚¹2ï¼šç»™äºˆç‰©å“
      - type: "GiveItem"
        item: "diamond"
        amount: 5
```

### æ¡ä»¶åˆ¤æ–­ç¤ºä¾‹

```yaml
vip_box:
  identifier: "minecraft:chest"
  name: "Â§6VIPå®ç®±"

  on_use:
    type: "condition"

    # æ¡ä»¶ï¼šæ£€æŸ¥æƒé™
    condition:
      type: "HasPermission"
      permission: "yritems.vip"

    # æ¡ä»¶æ»¡è¶³æ—¶æ‰§è¡Œ
    on_success:
      - type: "Message"
        text: "Â§aVIPç‰¹æƒå·²éªŒè¯ï¼"
      - type: "GiveItem"
        item: "legendary_sword"
        amount: 1

    # æ¡ä»¶ä¸æ»¡è¶³æ—¶æ‰§è¡Œ
    on_fail:
      - type: "Message"
        text: "Â§cä½ éœ€è¦VIPæƒé™æ‰èƒ½æ‰“å¼€æ­¤å®ç®±ï¼"
```

### å¤æ‚æµç¨‹ç¤ºä¾‹

```yaml
upgrade_stone:
  identifier: "minecraft:nether_star"
  name: "Â§bå¼ºåŒ–çŸ³"

  on_use:
    type: "sequence"
    nodes:
      # 1. æ£€æŸ¥ç­‰çº§
      - type: "PlayerLevel"
        operator: ">="
        value: 30
        on_success:
          # 2. æ£€æŸ¥ææ–™
          - type: "HasItem"
            item: "diamond"
            amount: 10
            on_success:
              # 3. æ‰£é™¤ææ–™å¹¶ç»™äºˆå¥–åŠ±
              - type: "Command"
                command: "/clear {player} diamond 0 10"
              - type: "GiveItem"
                item: "legendary_sword"
                amount: 1
              - type: "Message"
                text: "Â§aå¼ºåŒ–æˆåŠŸï¼è·å¾—ä¼ è¯´ä¹‹å‰‘ï¼"
            on_fail:
              - type: "Message"
                text: "Â§céœ€è¦10ä¸ªé’»çŸ³æ‰èƒ½å¼ºåŒ–ï¼"
        on_fail:
          - type: "Message"
            text: "Â§céœ€è¦ç­‰çº§30æ‰èƒ½ä½¿ç”¨å¼ºåŒ–çŸ³ï¼"
```

### è„šæœ¬èŠ‚ç‚¹

#### åœ¨é…ç½®ä¸­è°ƒç”¨è„šæœ¬

```yaml
custom_item:
  identifier: "minecraft:stick"
  name: "Â§5è‡ªå®šä¹‰ç‰©å“"

  on_use:
    type: "ScriptAction"
    script: "MyScript.js::handleUse"
    args:
      - "param1"
      - "param2"
```

#### å¯¹åº”çš„JavaScriptå‡½æ•°

```javascript
/**
 * å¤„ç†è‡ªå®šä¹‰ç‰©å“ä½¿ç”¨
 */
function handleUse(args) {
    var param1 = args[0];
    var param2 = args[1];

    print("å‚æ•°1: " + param1);
    print("å‚æ•°2: " + param2);

    // ä½ çš„è‡ªå®šä¹‰é€»è¾‘

    return true;  // è¿”å›æˆåŠŸ/å¤±è´¥
}
```

---

## å¸¸è§é—®é¢˜

### 1. ä¸ºä»€ä¹ˆç‰©å“çš„å±æ€§æ²¡æœ‰ç”Ÿæ•ˆï¼Ÿ

**åŸå› **ï¼šYRItemsåªæ˜¯**ç‰©å“åº“æ’ä»¶**ï¼Œä¸å¤„ç†æ¸¸æˆé€»è¾‘ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨YRAttributeæ’ä»¶ï¼ˆæœªå¼€æ”¾ï¼‰
- æˆ–é€šè¿‡è„šæœ¬ç³»ç»Ÿè‡ªè¡Œå®ç°

ç¤ºä¾‹è„šæœ¬ï¼š
```javascript
// @Event(eventName = "cn.nukkit.event.entity.EntityDamageByEntityEvent")
function applyCustomDamage(event) {
    var damager = event.getDamager();
    if (damager instanceof Packages.cn.nukkit.Player) {
        var weapon = damager.getInventory().getItemInHand();
        var nbt = weapon.getNamedTag();

        if (nbt.exist("YRAttributes")) {
            var attr = nbt.getCompound("YRAttributes");
            if (attr.exist("Damage")) {
                var damage = attr.getInt("Damage");
                event.setDamage(damage);
            }
        }
    }
}
```

### 2. å¦‚ä½•ä¿®æ”¹åŠ¨æ€Loreçš„æ˜¾ç¤ºè§„åˆ™ï¼Ÿ

1. ç¼–è¾‘ `configs/display_rules.yml`
2. è¿è¡Œ `/yritems reload`
3. æŸ¥çœ‹ç‰©å“å³å¯çœ‹åˆ°æ–°æ•ˆæœ

### 3. è„šæœ¬ä¿®æ”¹åä¸ç”Ÿæ•ˆï¼Ÿ

ç¡®ä¿ï¼š
1. è„šæœ¬æ–‡ä»¶ä¿å­˜ä¸ºUTF-8ç¼–ç 
2. JavaScriptè¯­æ³•æ­£ç¡®
3. è¿è¡Œäº† `/yritems reload`

æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯ä¿¡æ¯ã€‚

### 4. å¦‚ä½•æ·»åŠ æ–°çš„ç‰©å“ï¼Ÿ

1. åœ¨ `items/` ç›®å½•çš„ä»»æ„YAMLæ–‡ä»¶ä¸­æ·»åŠ é…ç½®
2. è¿è¡Œ `/yritems reload`
3. ä½¿ç”¨ `/yritems give` ç»™äºˆç‰©å“

### 5. é¢œè‰²ä»£ç å‚è€ƒ

| ä»£ç  | é¢œè‰² | ä»£ç  | é¢œè‰² |
|-----|------|------|------|
| Â§0 | é»‘è‰² | Â§8 | æ·±ç° |
| Â§1 | æ·±è“ | Â§9 | è“è‰² |
| Â§2 | æ·±ç»¿ | Â§a | ç»¿è‰² |
| Â§3 | æ·±é’ | Â§b | é’è‰² |
| Â§4 | æ·±çº¢ | Â§c | çº¢è‰² |
| Â§5 | ç´«è‰² | Â§d | ç²‰çº¢ |
| Â§6 | é‡‘è‰² | Â§e | é»„è‰² |
| Â§7 | ç°è‰² | Â§f | ç™½è‰² |

æ ¼å¼ä»£ç ï¼š
- `Â§l` - ç²—ä½“
- `Â§m` - åˆ é™¤çº¿
- `Â§n` - ä¸‹åˆ’çº¿
- `Â§o` - æ–œä½“
- `Â§r` - é‡ç½®

### 6. èŠ‚ç‚¹ç³»ç»Ÿä¸­çš„å ä½ç¬¦

åœ¨èŠ‚ç‚¹é…ç½®ä¸­å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å ä½ç¬¦ï¼š

- `{player}` - ç©å®¶åç§°
- `{world}` - ä¸–ç•Œåç§°
- `{x}`, `{y}`, `{z}` - ç©å®¶åæ ‡

ç¤ºä¾‹ï¼š
```yaml
- type: "Command"
  command: "/tp {player} 0 100 0"
```

### 7. å¦‚ä½•è°ƒè¯•è„šæœ¬ï¼Ÿ

åœ¨è„šæœ¬ä¸­ä½¿ç”¨ `print()` è¾“å‡ºè°ƒè¯•ä¿¡æ¯ï¼š

```javascript
function myFunction(event) {
    print("[è°ƒè¯•] äº‹ä»¶è¢«è§¦å‘");
    print("[è°ƒè¯•] ç©å®¶: " + event.getPlayer().getName());

    // ä½ çš„ä»£ç 
}
```

æŸ¥çœ‹æœåŠ¡å™¨æ§åˆ¶å°çš„è¾“å‡ºã€‚

---

## æ›´å¤šèµ„æº

- **Nukkit APIæ–‡æ¡£**ï¼šhttps://ci.opencollab.dev/job/NukkitX/job/Nukkit/job/master/javadoc/
- **JavaScriptå‚è€ƒ**ï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/JavaScript
- **Minecrafté¢œè‰²ä»£ç **ï¼šhttps://minecraft.fandom.com/wiki/Formatting_codes

---

<div align="center">

**äº«å—ä½¿ç”¨ YRItems åˆ›å»ºè‡ªå®šä¹‰ç‰©å“çš„ä¹è¶£ï¼**

æœ‰é—®é¢˜ï¼Ÿæ¬¢è¿åé¦ˆï¼

</div>
